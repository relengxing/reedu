# 课件仓库使用说明

## 快速开始

### 1. 注册并登录

首先访问网站，点击右上角的"登录/注册"按钮：
- 输入邮箱和密码进行注册
- 注册后会收到验证邮件（需要验证后才能完全使用）
- 使用相同的邮箱和密码登录

### 2. 绑定课件仓库

登录后，进入"配置"页面：

1. **填写仓库地址**
   支持以下格式：
   - GitHub完整URL: `https://github.com/用户名/仓库名`
   - Gitee简写: `gitee/用户名/仓库名`
   - GitHub简写: `github/用户名/仓库名`

2. **点击"添加仓库"**
   - 系统会自动解析仓库URL
   - 转换为raw内容URL
   - 从仓库加载manifest.json
   - 解析所有课件并显示在首页

3. **查看加载结果**
   - 添加成功后会显示"仓库添加成功"
   - 随后显示"课件已加载"
   - 返回首页即可看到所有课件

### 3. 使用课件

在首页（导航页面）可以看到：
- 按组分类的课件列表
- 每组显示课件数量
- 点击任意组进入播放器

## 仓库要求

### 目录结构

你的Git仓库根目录必须包含一个`manifest.json`文件：

```
your-repo/
├── manifest.json         # 必需：课件清单
├── 数学/
│   ├── 一元二次方程.html
│   └── 函数图像.html
└── 物理/
    └── 牛顿定律.html
```

### manifest.json格式

```json
{
  "name": "我的课件库",
  "description": "课件描述",
  "groups": [
    {
      "id": "math",
      "name": "数学",
      "folder": "数学",
      "coursewares": [
        {
          "filename": "一元二次方程.html",
          "title": "一元二次方程"
        },
        {
          "filename": "函数图像.html",
          "title": "函数图像"
        }
      ]
    },
    {
      "id": "physics",
      "name": "物理",
      "folder": "物理",
      "coursewares": [
        {
          "filename": "牛顿定律.html",
          "title": "牛顿定律"
        }
      ]
    }
  ]
}
```

## 管理仓库

### 查看已绑定的仓库

在"配置"页面的"我的仓库"标签下，可以看到：
- 仓库URL
- 平台（GitHub/Gitee）
- 添加时间
- 操作按钮（删除）

### 删除仓库

点击仓库右侧的删除按钮：
- 确认删除后，仓库从列表中移除
- 该仓库的所有课件从首页移除
- 不会影响Git仓库本身的内容

### 刷新课件

如果你更新了Git仓库中的课件：
1. 删除该仓库绑定
2. 重新添加该仓库
3. 系统会重新加载最新的课件

## 发布到课件广场

### 发布流程

1. 在"配置"页面切换到"发布课件"标签
2. 选择要发布的课件组
3. 填写标题和描述
4. 点击"发布"

### 管理已发布的课件

在"我的公开课件"列表中可以：
- 查看点赞数和浏览量
- 切换公开/私有状态
- 编辑课件信息
- 删除已发布的课件

## 本地上传课件

如果你不想使用Git仓库，也可以直接上传HTML文件：

1. 在"配置"页面切换到"我的课件"标签
2. 点击"上传课件"按钮
3. 选择符合格式的HTML文件
4. 上传后的课件会立即显示在列表中

**注意**: 本地上传的课件存储在浏览器localStorage中，清除浏览器数据会丢失。

## 常见问题

### Q: 添加仓库后首页没有显示课件？

A: 可能的原因：
1. manifest.json格式不正确，检查JSON语法
2. 仓库是私有的，系统无法访问raw内容
3. 网络问题，尝试刷新页面
4. 查看浏览器控制台的错误日志

### Q: 支持私有仓库吗？

A: 目前不支持私有仓库，因为：
- 需要通过公开的raw URL访问
- 不需要认证才能读取
- 建议使用公开仓库或Gitee的公开项目

### Q: 可以同时绑定多个仓库吗？

A: 可以！系统支持绑定多个仓库：
- 所有仓库的课件会合并显示
- 每个仓库的课件组独立显示
- 可以随时添加或删除任意仓库

### Q: GitHub和Gitee有什么区别？

A: 功能上完全相同：
- GitHub: 国际化平台，访问速度可能较慢
- Gitee: 国内平台，访问速度更快
- 选择你喜欢的平台即可

### Q: 如何分享我的课件？

A: 有两种方式：
1. **分享仓库URL**: 让其他人添加相同的仓库
2. **发布到课件广场**: 其他人可以在广场浏览和播放

### Q: 课件HTML文件有什么要求？

A: 请参考项目文档：
- `课件要求.md` - 课件HTML格式说明
- `结构化课件格式说明.md` - 详细的格式规范

## 技术说明

### 加载机制

1. **自动加载**: 登录后自动加载所有绑定的仓库
2. **按需加载**: 通过动态路由访问时才加载具体课件内容
3. **缓存策略**: localStorage缓存课件列表，减少重复请求

### Raw URL转换

系统会自动将你输入的URL转换为raw内容URL：

- GitHub:
  - 输入: `https://github.com/user/repo`
  - 转换: `https://raw.githubusercontent.com/user/repo/main/`

- Gitee:
  - 输入: `gitee/user/repo`
  - 转换: `https://gitee.com/user/repo/raw/master/`

### 动态路由

发布到课件广场的课件使用语义化URL：
```
https://reedu.bofangqi.com/github/user/repo/folder/course
https://reedu.bofangqi.com/gitee/user/repo/course
```

参数说明：
- `platform`: github 或 gitee
- `user`: 用户名
- `repo`: 仓库名
- `folder`: 可选的文件夹路径
- `course`: 课件文件名（不带.html）

## 示例仓库

可以尝试添加以下示例仓库：
```
https://github.com/relengxing/reedu-coursewares
```

这个仓库包含了一些示例课件，可以帮助你理解课件格式和仓库结构。

---

**需要帮助？** 查看项目文档或提交Issue。

